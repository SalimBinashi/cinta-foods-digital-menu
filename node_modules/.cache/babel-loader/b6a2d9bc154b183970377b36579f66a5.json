{"ast":null,"code":"import _slicedToArray from \"/home/belbet/Project files/cinta-foods-digital-menu/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/belbet/Project files/cinta-foods-digital-menu/client/src/Menu.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Mains from \"./components/Mains\";\nimport Extras from \"./components/Extras\";\nimport Total from \"./components/Total\";\nimport { Provider } from \"./Context\";\nimport Axios from \"axios\";\nimport getTableNumber from \"./helperFunctions/helperFunctionTables\";\nimport { Redirect, useHistory } from \"react-router-dom\";\nimport getStatus from \"./helperFunctions/helperFunctionMenu\";\nimport Session from \"react-session-api\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport \"./components/Dashboard/dashboard.css\";\nexport default function Menu(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      mainsList = _useState2[0],\n      setMainsList = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      drinksList = _useState4[0],\n      setDrinksList = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      sidesList = _useState6[0],\n      setSidesList = _useState6[1]; // const [allAvailable, setAllAvailable] = useState([]);\n\n\n  var history = useHistory();\n  var tableNumber = props.state.table_number; // use effect method\n\n  useEffect(function () {\n    getTableNumber();\n    showMains();\n    showDrinks();\n    showSides();\n    setTimeout(function () {\n      closeMenu();\n    }, 30000);\n  }, []); // close the menu\n\n  var closeMenu = function closeMenu() {\n    Session.remove(\"status\");\n    console.log(Session.get(\"status\"));\n  }; // get mains list\n\n\n  var showMains = function showMains() {\n    Axios.get(\"http://localhost:3001/getMains\", {}).then(function (response) {\n      setMainsList(response.data);\n    });\n  }; // get drinks list\n\n\n  var showDrinks = function showDrinks() {\n    Axios.get(\"http://localhost:3001/getDrinks\", {}).then(function (response) {\n      setDrinksList(response.data);\n    });\n  }; // get sides list\n\n\n  var showSides = function showSides() {\n    Axios.get(\"http://localhost:3001/getSides\", {}).then(function (response) {\n      setSidesList(response.data);\n    });\n  }; // Json iterator\n\n\n  var jsonQuery = require(\"json-query\"); // query through the response\n\n\n  var mainMeal = jsonQuery(\"mains[**][**]\", {\n    data: mainsList\n  }).value;\n  var mainSides = jsonQuery(\"sides[**][**]\", {\n    data: sidesList\n  }).value;\n  var mainDrinks = jsonQuery(\"drinks[**][**]\", {\n    data: drinksList\n  }).value; // concatenate all objects to one\n\n  function merge(source, target) {\n    Object.keys(source).forEach(function (key) {\n      if (!source[key]) {\n        return;\n      }\n\n      if (typeof source[key] === \"object\") {\n        target[key] = target[key] || (Array.isArray(source[key]) ? [] : {});\n        return merge(source[key], target[key]);\n      }\n\n      target[key] = source[key];\n    });\n  }\n\n  var allAvailable = {};\n  merge(mainsList, allAvailable);\n  merge(sidesList, allAvailable);\n  merge(drinksList, allAvailable); //activate table function\n\n  var deactivateTable = function deactivateTable() {\n    Axios.patch(\"http://localhost:3001/tables/updateTable\", {\n      table_number: tableNumber,\n      status: \"offline\"\n    }).then(function (response) {\n      if (response.data.message === \"update successful\") {\n        Session.set(\"status\", true);\n        toast.success(Session.get(\"status\"));\n        setTimeout(function () {\n          toast.success(\"Thank you for business. Cinta Foods, Your satisfaction is our priority\");\n        }, 400);\n        history.push('/dashboard');\n      }\n    });\n  }; // const allAvailable= JSON.parse(mainsList);\n\n\n  console.log(\"THIS IS THE ALL: \", allAvailable);\n  return !getStatus ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/dashboard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Provider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"./cinta foods 2.png\",\n    alt: \"Cinta Foods Restaurant\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Mains, {\n    meals: mainMeal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"aside\", {\n    className: \"aside\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Extras, {\n    type: \"Sides\",\n    items: mainSides,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Extras, {\n    type: \"Drinks\",\n    items: mainDrinks,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Total, {\n    data: allAvailable,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    class: \"submit\",\n    type: \"submit\",\n    name: \"status\",\n    onClick: deactivateTable,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, \"Deactivate Table \")), /*#__PURE__*/React.createElement(Toaster, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }))));\n}","map":{"version":3,"sources":["/home/belbet/Project files/cinta-foods-digital-menu/client/src/Menu.js"],"names":["React","useState","useEffect","Mains","Extras","Total","Provider","Axios","getTableNumber","Redirect","useHistory","getStatus","Session","toast","Toaster","Menu","props","mainsList","setMainsList","drinksList","setDrinksList","sidesList","setSidesList","history","tableNumber","state","table_number","showMains","showDrinks","showSides","setTimeout","closeMenu","remove","console","log","get","then","response","data","jsonQuery","require","mainMeal","value","mainSides","mainDrinks","merge","source","target","Object","keys","forEach","key","Array","isArray","allAvailable","deactivateTable","patch","status","message","set","success","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Mains from \"./components/Mains\";\nimport Extras from \"./components/Extras\";\nimport Total from \"./components/Total\";\nimport { Provider } from \"./Context\";\nimport Axios from \"axios\";\nimport getTableNumber from \"./helperFunctions/helperFunctionTables\";\nimport { Redirect, useHistory } from \"react-router-dom\";\nimport getStatus from \"./helperFunctions/helperFunctionMenu\";\nimport Session from \"react-session-api\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport \"./components/Dashboard/dashboard.css\";\n\nexport default function Menu(props) {\n  const [mainsList, setMainsList] = useState([]);\n  const [drinksList, setDrinksList] = useState([]);\n  const [sidesList, setSidesList] = useState([]);\n  // const [allAvailable, setAllAvailable] = useState([]);\n  const history = useHistory();\n  const tableNumber = props.state.table_number;\n\n\n  // use effect method\n  useEffect(() => {\n    getTableNumber();\n    showMains();\n    showDrinks();\n    showSides();\n    setTimeout(function () {\n      closeMenu();\n    }, 30000);\n  }, []);\n\n  // close the menu\n  const closeMenu = () => {\n    Session.remove(\"status\");\n    console.log(Session.get(\"status\"));\n  };\n  // get mains list\n  const showMains = () => {\n    Axios.get(\"http://localhost:3001/getMains\", {}).then((response) => {\n      setMainsList(response.data);\n    });\n  };\n\n  // get drinks list\n  const showDrinks = () => {\n    Axios.get(\"http://localhost:3001/getDrinks\", {}).then((response) => {\n      setDrinksList(response.data);\n    });\n  };\n\n  // get sides list\n  const showSides = () => {\n    Axios.get(\"http://localhost:3001/getSides\", {}).then((response) => {\n      setSidesList(response.data);\n    });\n  };\n\n  // Json iterator\n  var jsonQuery = require(\"json-query\");\n  // query through the response\n  var mainMeal = jsonQuery(\"mains[**][**]\", { data: mainsList }).value;\n  var mainSides = jsonQuery(\"sides[**][**]\", { data: sidesList }).value;\n  var mainDrinks = jsonQuery(\"drinks[**][**]\", { data: drinksList }).value;\n\n  // concatenate all objects to one\n  function merge(source, target) {\n    Object.keys(source).forEach(function (key) {\n      if (!source[key]) {\n        return;\n      }\n      if (typeof source[key] === \"object\") {\n        target[key] = target[key] || (Array.isArray(source[key]) ? [] : {});\n        return merge(source[key], target[key]);\n      }\n      target[key] = source[key];\n    });\n  }\n  var allAvailable = {};\n  merge(mainsList, allAvailable);\n  merge(sidesList, allAvailable);\n  merge(drinksList, allAvailable);\n\n  //activate table function\n  const deactivateTable = () => {\n    Axios.patch(\"http://localhost:3001/tables/updateTable\", {\n      table_number: tableNumber,\n      status: \"offline\",\n    }).then((response) => {\n      if (response.data.message === \"update successful\") {\n        Session.set(\"status\", true);  \n        toast.success( Session.get(\"status\"));\n        setTimeout(() => {\n          toast.success(\n            \"Thank you for business. Cinta Foods, Your satisfaction is our priority\"\n          );\n        }, 400);\n        history.push('/dashboard');\n      }\n    });\n  };\n\n  // const allAvailable= JSON.parse(mainsList);\n  console.log(\"THIS IS THE ALL: \", allAvailable);\n  return !getStatus ? (\n    <Redirect to=\"/dashboard\" />\n  ) : (\n    <div>\n      <Provider>\n        <div className=\"menu\">\n          <img src=\"./cinta foods 2.png\" alt=\"Cinta Foods Restaurant\" />\n          <Mains meals={mainMeal} />\n          <aside className=\"aside\">\n            <Extras type=\"Sides\" items={mainSides} />\n            <Extras type=\"Drinks\" items={mainDrinks} />\n          </aside>\n          <Total data={allAvailable} />\n            <button\n              class=\"submit\"\n              type=\"submit\"\n              name=\"status\"\n              onClick={deactivateTable}>\n              <span>Deactivate Table </span>\n            </button>\n            <Toaster/>\n        </div>\n      </Provider>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}