{"ast":null,"code":"import _slicedToArray from \"/home/belbet/Project files/cinta-foods-digital-menu/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _construct from \"/home/belbet/Project files/cinta-foods-digital-menu/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/construct\";\nimport _toConsumableArray from \"/home/belbet/Project files/cinta-foods-digital-menu/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/belbet/Project files/cinta-foods-digital-menu/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/belbet/Project files/cinta-foods-digital-menu/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/belbet/Project files/cinta-foods-digital-menu/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/belbet/Project files/cinta-foods-digital-menu/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\n/*\nCopyright (c) 2020 Uber Technologies, Inc.\n\nThis source code is licensed under the MIT license found in the\nLICENSE file in the root directory of this source tree.\n*/\nimport React from 'react';\nimport { transformFromAstSync } from '@babel/core'; //@ts-ignore\n\nimport presetReact from '@babel/preset-react';\nimport { parse } from '../ast';\nimport { getStyles } from '../utils';\n\nvar errorBoundary = function errorBoundary(Element, errorCallback) {\n  var ErrorBoundary = /*#__PURE__*/function (_React$Component) {\n    _inherits(ErrorBoundary, _React$Component);\n\n    var _super = _createSuper(ErrorBoundary);\n\n    function ErrorBoundary() {\n      _classCallCheck(this, ErrorBoundary);\n\n      return _super.apply(this, arguments);\n    }\n\n    _createClass(ErrorBoundary, [{\n      key: \"componentDidCatch\",\n      value: function componentDidCatch(error) {\n        errorCallback(error);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        if (typeof Element === 'undefined') return null;\n        return typeof Element === 'function' ? React.createElement(Element, null) : Element;\n      }\n    }]);\n\n    return ErrorBoundary;\n  }(React.Component);\n\n  return ErrorBoundary;\n};\n\nvar evalCode = function evalCode(ast, scope, presets) {\n  var transformedCode = transformFromAstSync(ast, undefined, {\n    presets: presets ? [presetReact].concat(_toConsumableArray(presets)) : [presetReact],\n    inputSourceMap: false,\n    sourceMaps: false,\n    comments: false,\n    // TS preset needs this and it doesn't seem to matter when TS preset\n    // is not used, so let's keep it here?\n    filename: 'file.tsx'\n  });\n  var resultCode = transformedCode ? transformedCode.code : '';\n  var scopeKeys = Object.keys(scope);\n  var scopeValues = Object.values(scope); //@ts-ignore\n\n  var res = _construct(Function, ['React'].concat(_toConsumableArray(scopeKeys), [\"return \".concat(resultCode)]));\n\n  return res.apply(void 0, [React].concat(_toConsumableArray(scopeValues)));\n};\n\nvar generateElement = function generateElement(ast, scope, errorCallback, presets) {\n  return errorBoundary(evalCode(ast, scope, presets), errorCallback);\n};\n\nvar transpile = function transpile(code, transformations, scope, setOutput, setError, presets) {\n  try {\n    var ast = transformations.reduce(function (result, transformation) {\n      return transformation(result);\n    }, parse(code));\n    var component = generateElement(ast, scope, function (error) {\n      setError(error.toString());\n    }, presets);\n    setOutput({\n      component: component\n    });\n    setError(null);\n  } catch (error) {\n    setError(error.toString());\n  }\n};\n\nvar Compiler = function Compiler(_ref) {\n  var scope = _ref.scope,\n      code = _ref.code,\n      setError = _ref.setError,\n      transformations = _ref.transformations,\n      placeholder = _ref.placeholder,\n      minHeight = _ref.minHeight,\n      presets = _ref.presets,\n      className = _ref.className;\n\n  var _React$useState = React.useState({\n    component: null\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      output = _React$useState2[0],\n      setOutput = _React$useState2[1];\n\n  React.useEffect(function () {\n    transpile(code, transformations, scope, setOutput, setError, presets);\n  }, [code]);\n  var Element = output.component;\n  var Placeholder = placeholder;\n  return React.createElement(\"div\", Object.assign({}, getStyles({\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'baseline',\n    flexWrap: 'wrap',\n    minHeight: \"\".concat(minHeight || 0, \"px\"),\n    paddingTop: minHeight ? '16px' : 0,\n    paddingBottom: minHeight ? '16px' : 0\n  }, className)), Element ? React.createElement(Element, null) : Placeholder ? React.createElement(Placeholder, {\n    height: minHeight || 32\n  }) : null);\n};\n\nexport default React.memo(Compiler, function (prevProps, nextProps) {\n  return prevProps.code === nextProps.code;\n});","map":null,"metadata":{},"sourceType":"module"}